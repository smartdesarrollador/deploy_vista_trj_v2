import{a as D,b as M}from"./chunk-KUV4AAZE.js";import{i as p,j as S,l as x,q as O}from"./chunk-G2ZNTVWC.js";import{$ as c,B as g,Da as k,Lb as i,N as b,P as y,Q as h,V as a,_ as v,d as u,i as f,la as w,p as d,t as m,ua as j}from"./chunk-QO2NU5YS.js";function E(n){n||(w(E),n=c(j));let e=new f(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(b(e))}var L=u(()=>{"use strict";i();y();h();});var _,$=u(()=>{"use strict";i();y();h();O();M();i();_=class n{http=c(x);baseUrl=D.apiUrl;getDigitalCardBySlug(e){return this.http.get(`${this.baseUrl}/tarjetas/${e}`).pipe(m(t=>!t||!t.data?null:t.data),g(t=>(console.error("Error obteniendo tarjeta digital p\xFAblica:",t),d(null))))}validateDigitalCard(e){return!(!e||typeof e!="object"||typeof e.id!="number"||!e.slug||typeof e.is_active!="boolean"||typeof e.is_public!="boolean"||!e.is_active||!e.is_public||!e.personal_info||!e.personal_info.name)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})}});var I,T=u(()=>{"use strict";i();S();i();I=class n{constructor(e){this.platformId=e}generateDynamicManifest(e,t){if(!e)return null;let r=e.name||e.nombre||"Usuario",o=e.title||e.cargo||"Profesional",s=e.location||e.ubicacion||"";return{name:`${r} - Tarjeta Digital`,short_name:r,description:`Tarjeta digital profesional de ${r}, ${o}${s?" en "+s:""}. Acceso directo a toda su informaci\xF3n de contacto.`,start_url:t,display:"standalone",orientation:"portrait-primary",theme_color:"#00ffff",background_color:"#000000",scope:"/",lang:"es-ES",dir:"ltr",categories:["business","productivity","social"],prefer_related_applications:!1,icons:[{src:"assets/pwa/apple-touch-icon-180x180.png",sizes:"180x180",type:"image/png",purpose:"any"},{src:"assets/pwa/icon_JE_192.png",sizes:"192x192",type:"image/png",purpose:"any"},{src:"assets/pwa/icon_JE_512_maskable.png",sizes:"512x512",type:"image/png",purpose:"maskable"},{src:"assets/pwa/icon_JE_512.png",sizes:"512x512",type:"image/png",purpose:"any"},{src:"assets/pwa/logo_JE_1024.png",sizes:"1024x1024",type:"image/png",purpose:"any"}],shortcuts:[{name:`Ver Tarjeta de ${r}`,short_name:"Tarjeta",description:`Acceso directo a la tarjeta digital de ${r}`,url:t,icons:[{src:"assets/pwa/icon_JE_192.png",sizes:"192x192",type:"image/png"}]}],share_target:{action:t,method:"GET",params:{title:"title",text:"text",url:"url"}},screenshots:[{src:"assets/pwa/screenshot-wide.png",sizes:"1280x720",type:"image/png",form_factor:"wide",label:`Vista desktop de la tarjeta digital de ${r}`},{src:"assets/pwa/screenshot-narrow.png",sizes:"360x640",type:"image/png",form_factor:"narrow",label:`Vista m\xF3vil de la tarjeta digital de ${r}`}],protocol_handlers:[{protocol:"mailto",url:`${t}?email=%s`}]}}updateManifestLink(e,t){if(!p(this.platformId))return;let r=this.generateDynamicManifest(e,t);if(!r)return;let o=document.querySelector('link[rel="manifest"]');o&&o.remove();let s=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),R=URL.createObjectURL(s),l=document.createElement("link");l.rel="manifest",l.href=R,document.head.appendChild(l),console.log("[Manifest] Updated dynamic manifest for user:",e.name||e.nombre),console.log("[Manifest] Start URL:",t)}removeOldManifestURL(){if(!p(this.platformId))return;let e=document.querySelector('link[rel="manifest"]');e&&e.href.startsWith("blob:")&&URL.revokeObjectURL(e.href)}static \u0275fac=function(t){return new(t||n)(v(k))};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})}});export{E as a,L as b,_ as c,$ as d,I as e,T as f};
