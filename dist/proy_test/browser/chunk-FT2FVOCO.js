import{d as $,e as N,g as Y,h as B,j as V,p as Z}from"./chunk-BOHITBXD.js";import{a as A,b as te}from"./chunk-W3XFIVTZ.js";import{a as z,b as ee}from"./chunk-ZMU26NGW.js";import{A as X,m as b,s as F,u as U}from"./chunk-UNEY7QXV.js";import{$ as o,B as _,Kb as c,Ma as l,N as T,P as E,Q as M,V as I,Va as p,_a as O,ab as R,cb as P,d as u,da as m,db as i,eb as r,fb as d,i as w,ib as D,jb as s,kb as L,la as k,lb as q,nb as g,p as S,t as j,ua as f}from"./chunk-PKDUKL24.js";function h(n){n||(k(h),n=o(f));let t=new w(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(T(t))}var H=u(()=>{"use strict";c();E();M();});var v,J=u(()=>{"use strict";c();E();M();X();ee();c();v=class n{http=o(U);baseUrl=z.apiUrl;getDigitalCardBySlug(t){return this.http.get(`${this.baseUrl}/tarjetas/${t}`).pipe(j(e=>!e||!e.data?null:e.data),_(e=>(console.error("Error obteniendo tarjeta digital p\xFAblica:",e),S(null))))}validateDigitalCard(t){return!(!t||typeof t!="object"||typeof t.id!="number"||!t.slug||typeof t.is_active!="boolean"||typeof t.is_public!="boolean"||!t.is_active||!t.is_public||!t.personal_info||!t.personal_info.name)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=I({token:n,factory:n.\u0275fac,providedIn:"root"})}});var y,K=u(()=>{"use strict";F();c();y=class n{message="Cargando...";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-loading-spinner"]],inputs:{message:"message"},standalone:!0,features:[g],decls:11,vars:1,consts:[[1,"flex","flex-col","items-center","justify-center","space-y-4"],[1,"relative"],[1,"w-16","h-16","border-4","border-purple-200","border-t-purple-600","rounded-full","animate-spin"],[1,"absolute","inset-0","w-16","h-16","border-4","border-transparent","border-b-blue-400","rounded-full","animate-spin-reverse"],[1,"text-center"],[1,"text-white","text-lg","font-medium"],[1,"mt-2","flex","justify-center","space-x-1"],[1,"w-2","h-2","bg-purple-400","rounded-full","animate-bounce",2,"animation-delay","0ms"],[1,"w-2","h-2","bg-purple-400","rounded-full","animate-bounce",2,"animation-delay","150ms"],[1,"w-2","h-2","bg-purple-400","rounded-full","animate-bounce",2,"animation-delay","300ms"]],template:function(e,a){e&1&&(i(0,"div",0)(1,"div",1),d(2,"div",2)(3,"div",3),r(),i(4,"div",4)(5,"p",5),s(6),r(),i(7,"div",6),d(8,"div",7)(9,"div",8)(10,"div",9),r()()()),e&2&&(l(6),L(a.message))},dependencies:[b],styles:["@keyframes _ngcontent-%COMP%_spin-reverse{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}.animate-spin-reverse[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin-reverse 1s linear infinite}"]})}});function ie(n,t){n&1&&(i(0,"div",1),d(1,"app-loading-spinner",4),r())}function re(n,t){if(n&1&&(i(0,"div",2)(1,"div",5)(2,"h1",6),s(3,"404"),r(),i(4,"h2",7),s(5," Tarjeta no encontrada "),r(),i(6,"p",8),s(7),r(),i(8,"a",9),s(9," Volver al inicio "),r()()()),n&2){let e=D();l(7),q(" ",e.error()," ")}}function oe(n,t){if(n&1&&(i(0,"div",3),d(1,"app-digital-card",10),r()),n&2){let e=D();l(),R("cardData",e.cardData())("hideShareButtons",!1)}}var Q,ae=u(()=>{c();F();Z();H();Y();te();J();K();c();Q=class n{route=o(B);router=o(V);meta=o($);title=o(N);publicCardService=o(v);destroyRef=o(f);cardData=p(null);isLoading=p(!0);error=p(null);ngOnInit(){this.route.params.pipe(h(this.destroyRef)).subscribe(t=>{let e=t.slug;e?this.loadCard(e):this.handleError("URL no v\xE1lida")})}loadCard(t){this.isLoading.set(!0),this.error.set(null),this.publicCardService.getDigitalCardBySlug(t).pipe(h(this.destroyRef)).subscribe({next:e=>{e&&this.publicCardService.validateDigitalCard(e)?(this.cardData.set(e),this.configureMetaTags(e),this.isLoading.set(!1)):this.handleError("Esta tarjeta no est\xE1 disponible p\xFAblicamente")},error:e=>{console.error("Error loading digital card:",e),this.handleError("Error al cargar la tarjeta digital")}})}configureMetaTags(t){let e=t.personal_info?.name||"Tarjeta Digital",a=t.personal_info?.title||"",C=t.about_info?.description||`Tarjeta digital de ${e}`,x=a?`${e} - ${a}`:e,W=`/tarjeta/${t.slug}`;this.title.setTitle(x),this.meta.updateTag({name:"description",content:C}),this.meta.updateTag({property:"og:title",content:x}),this.meta.updateTag({property:"og:description",content:C}),this.meta.updateTag({property:"og:type",content:"profile"}),this.meta.updateTag({property:"og:url",content:W}),t.personal_info?.photo&&this.meta.updateTag({property:"og:image",content:t.personal_info.photo}),this.meta.updateTag({name:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({name:"twitter:title",content:x}),this.meta.updateTag({name:"twitter:description",content:C}),t.personal_info?.photo&&this.meta.updateTag({name:"twitter:image",content:t.personal_info.photo})}handleError(t){this.error.set(t),this.isLoading.set(!1),this.cardData.set(null),this.title.setTitle("Tarjeta no encontrada"),this.meta.updateTag({name:"description",content:"La tarjeta digital solicitada no est\xE1 disponible."})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=m({type:n,selectors:[["app-public-card"]],standalone:!0,features:[g],decls:4,vars:1,consts:[[1,"min-h-screen","bg-gradient-to-br","from-slate-900","via-purple-900","to-slate-900"],[1,"flex","justify-center","items-center","min-h-screen"],[1,"flex","flex-col","items-center","justify-center","min-h-screen","text-center","px-4"],[1,"relative","z-10","flex","justify-center","items-center","min-h-screen","py-8","px-4"],["message","Cargando tarjeta digital..."],[1,"max-w-md"],[1,"text-6xl","font-bold","text-white","mb-4"],[1,"text-2xl","font-semibold","text-gray-300","mb-4"],[1,"text-gray-400","mb-8"],["routerLink","/",1,"bg-purple-600","hover:bg-purple-700","text-white","font-medium","py-3","px-6","rounded-lg","transition-colors","duration-200"],[3,"cardData","hideShareButtons"]],template:function(e,a){e&1&&(i(0,"div",0),O(1,ie,2,0,"div",1)(2,re,10,1,"div",2)(3,oe,2,2,"div",3),r()),e&2&&(l(),P(a.isLoading()?1:a.error()?2:3))},dependencies:[b,A,y],styles:["[_nghost-%COMP%]{display:block;min-height:100vh}"]})}});ae();export{Q as PublicCardComponent};
